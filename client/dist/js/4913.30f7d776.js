"use strict";(self["webpackChunkkofer_psihoalata"]=self["webpackChunkkofer_psihoalata"]||[]).push([[4913],{9318:function(e,s,r){r.r(s),r.d(s,{default:function(){return g}});var a=r(7359),i=r(344),o=r(6190),t=r(9582),l=r(4886),n=r(266),d=r(5125),u=r(7808),m=function(){var e=this,s=e._self._c;return s(d.Z,{staticClass:"row text-center justify-center align-center fill-height",model:{value:e.isValid,callback:function(s){e.isValid=s},expression:"isValid"}},[s(n.Z,{attrs:{sm:"6"}},[s(t.Z,{attrs:{tile:""}},[s(l.EB,[e._v("Kreiranje korisnika")]),s(l.ZB,[s(u.Z,{attrs:{filled:"",shaped:"",label:"Ime",rules:[e=>e.length>0||"Morate unijeti ime"]},model:{value:e.name,callback:function(s){e.name=s},expression:"name"}}),s(u.Z,{attrs:{filled:"",shaped:"",label:"Prezime",rules:[e=>e.length>0||"Morate unijeti prezime"]},model:{value:e.lastname,callback:function(s){e.lastname=s},expression:"lastname"}}),s(u.Z,{attrs:{filled:"",shaped:"",label:"Korisničko ime",required:"",rules:[e=>e.length>0||"Morate unijeti korisničko ime",e.uniqueUsername]},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}}),s(u.Z,{attrs:{filled:"",shaped:"",label:"Lozinka",required:"","error-messages":e.errorPassword,"append-icon":e.showPass?"mdi-eye":"mdi-eye-off",type:e.showPass?"text":"password",rules:[e=>e.length>0||"Morate unijeti lozinku"]},on:{"click:append":function(s){e.showPass=!e.showPass}},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),s(u.Z,{attrs:{filled:"",shaped:"",label:"Potvrdite lozinku",required:"",rules:[e.passwordConfirmationRule],"error-messages":e.errorPassword,"append-icon":e.showRePass?"mdi-eye":"mdi-eye-off",type:e.showRePass?"text":"password"},on:{"click:append":function(s){e.showRePass=!e.showRePass}},model:{value:e.rePassword,callback:function(s){e.rePassword=s},expression:"rePassword"}}),s(i.Z,{attrs:{filled:"",shaped:"",items:e.roles,"item-text":"role","item-value":"id",disabled:e.isUpdating,chips:"","deletable-chips":"",label:"Privilegije","error-messages":e.matchError()},model:{value:e.role,callback:function(s){e.role=s},expression:"role"}}),e.error?s(a.Z,{attrs:{type:"error"}},[e._v(" "+e._s(e.error)+" ")]):e._e(),s(o.Z,{attrs:{disabled:!e.isValid,color:"primary"},on:{click:e.onSubmit}},[e._v("Kreiraj")])],1)],1)],1)],1)},c=[],h=r(3304),p={data:()=>({showPass:!1,showRePass:!1,errorPassword:"",isValid:!0,name:"",lastname:"",username:"",password:"",isUpdating:!1,rePassword:null,error:"",roles:[{role:"Adinistrator",id:1},{role:"Moderator",id:0}],role:null,items:[],users:[]}),computed:{passwordConfirmationRule(){return()=>this.password===this.rePassword||"Lozinke se ne poklapaju"},uniqueUsername(){return()=>!1===this.users.includes(this.username)||"Korisničko ime već postoji"}},watch:{isUpdating(e){e&&setTimeout((()=>this.isUpdating=!1),3e3)}},methods:{onSubmit(){h.Z.newUser({firstName:this.name,lastName:this.lastname,username:this.username,password:this.password,role:this.role}).then((e=>{console.log(e),this.$router.push({path:"/users/"})})).catch((e=>{this.error=e,console.log(e.message)}))},remove(e){const s=this.role.indexOf(e.id);s>=0&&this.role.splice(s,1)},matchError(){return null===this.role?"Morate unijeti privilegije":""}},mounted(){h.Z.getUserList().then((e=>{this.items=e.data,this.items.forEach((e=>{this.users.push(e.username)}))})).catch((e=>{this.error=e,console.log(e.message)}))}},f=p,w=r(1001),k=(0,w.Z)(f,m,c,!1,null,"dcc1ae84",null),g=k.exports}}]);
//# sourceMappingURL=4913.30f7d776.js.map